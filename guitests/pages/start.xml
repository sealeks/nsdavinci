<?xml-stylesheet href="../util/libscript.xsl" type="text/xsl"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="100%" height="100%" viewBox="0 0 576 324" enable-background="new 0 0 576 324" xml:space="preserve" xmlns:xml="http://www.w3.org/XML/1998/namespace" onload="init_project_controller()"><script type="text/javascript" xlink:href="../util/js/libutil.js"/><script type="text/javascript" xlink:href="../util/js/designer.js"/><script type="text/javascript" xlink:href="simulator.js"/>
    <script type="text/javascript" xlink:href="../util/js/libutil.js"/>
    <script type="text/javascript" xlink:href="../util/js/designer.js"/>

<script type="text/javascript" xlink:href="../util/js/designer.js"/> 
<script type="text/javascript" xlink:href="../util/js/libutil.js"/> 
<script type="text/javascript" id="stopscript"><![CDATA[
function ___global___unload(){
if (window.simTick) clearInterval(window.simTick);
if (window.simulation_detach) simulation_detach();
   
//alert('Stop');


};
]]></script>
<script type="text/javascript" id="startscript"><![CDATA[
if ((window.$$editable)&&(!window.$$editable())){
//alert('startscript: ' + window.document.URL);
simproccessor  = [];






SIMULATIONTICK = 100;

function add_simulation(sim){ 
       simproccessor.push(sim);
       
}

function  simulation_execute(){
  for (var i=0; i < simproccessor.length; ++i){
      simproccessor[i].execute();
  }
}

function simulation_detach(){
  for (var i=0; i < simproccessor.length; ++i){
      simproccessor[i].detach();
  }
}





window.simTick = setInterval(simulation_execute, SIMULATIONTICK );




////////////////////////////////////////////////////////////////////////////////////////////////////////

add_simulation ( new simulator.initializer('in_pos' , 50 , 50));
add_simulation ( new simulator.initializer('in_sp' , 50 , 50));
add_simulation ( new simulator.initializer('auto' , 1 , 0))

add_simulation ( new simulator.initializer('out_pos' , 50 , 50));
add_simulation ( new simulator.initializer('out_sp' , 50 , 50));
add_simulation ( new simulator.initializer('level' , 50 , 50));
add_simulation ( new simulator.initializer('level0' , 50 , 50));
add_simulation ( new simulator.initializer('level_sp' , 50 , 50));

add_simulation ( new simulator.initializer('v1on' , 0 , 0));
add_simulation ( new simulator.initializer('v1off' , 1 , 0));
add_simulation ( new simulator.initializer('rv1on' , 0 , 0));
add_simulation ( new simulator.initializer('rv1off' , 0 , 0));
add_simulation ( new simulator.initializer('dv1on' , 0 , 0));
add_simulation ( new simulator.initializer('dv1off' , 0 , 0));

add_simulation ( new simulator.valueobserver('level' , null , 'level + (in_pos-out_pos)/60000 * level.maxeu' ,null));

add_simulation ( new simulator.actuator('in_pos' , 'in_sp'));

add_simulation (new simulator.regulator('level', 'level_sp', 'out_pos' , 'out_sp', 'auto' , true, 'level_p', 'level_i', 'level_d' ));

add_simulation (new simulator.valve('v1on', 'v1off' , 'dv1on', 'dv1off', 'rv1on', 'rv1off', 5000, 5000 ));
//add_simulation (new simulator.valve('v1on', 'v1off' , 'dv1on', /*'dv1off'*/null, 'rv1on', /*'rv1off'*/null, 5000, 1 ));
//add_simulation (new simulator.valve('v1on', 'v1off' , /*'dv1on'*/null, 'dv1off', /*'rv1on'*/null, 'rv1off', 1, 5000 ));
//add_simulation (new simulator.valve('v1on', null , null , null, 'rv1on', null, 5000, 1 ));
  

};
]]></script>
<project path="file:///F:/Project/davinci/guitests/pages/">

  
  <form name="guimotor2" file="guimotor2.xml" caption="Газ" left="0%" top="0%" width="85%" height="85%" decorated="no" visible="false"/>
  <form name="testopen" file="testopen.xml" caption="Мазут" left="85%" top="0%" width="15%" height="100%" decorated="no"/>
  
  <form name="falarm" file="falarm.xml" left="0%" top="85%" width="85%" height="15%" caption="fa" decorated="no" visible="true"/>
  <form name="te" file="test.xml" left="0%" top="00%" width="85%" height="85%" caption="te" decorated="no"/>
  <!--form name="tes" file="atest.xml" left="0%" top="00%" width="85%" height="85%" caption="te" decorated="no"/-->
  
  <scriptfile name="script1" file="script1.js"/>

  <lib xsd="../libs/main/mainlib.xsd" name="mainlib" caption="Базовая библиотека компонентов"/>
  <lib xsd="../libs/svg/svg.xsd" name="svglib" caption="SVG"/>
</project>

</svg>